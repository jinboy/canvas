<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
    <meta charset="utf-8"/>
    <title>canvas水印</title>
    <style type="text/css">
        .canvas-container {
            border: 1px solid #aaa;
            width: 800px;
            height: 480px;
            margin: 0 auto;
        }

        .box-container {
            margin-top: 20px;
        }

        .red-box {
            /*background-color: #f00;*/
            background-color: transparent;
            margin-left: 50px;
            width: 60px;
            height: 40px;
        }
    </style>
</head>

<body>
<div class="canvas-container">
    <canvas width='800' height="480"></canvas>
</div>
<div class="box-container">
    <div class="red-box">添加</div>
    <!--<span class="red-box" contenteditable="true"></span>-->
</div>
</body>

<script src="stage.js"></script>
<script src="sprite.js"></script>
<script type="text/javascript">
    const BOX_PADDING = 10;
    const ICON_HEIGHT = 20;
    const ROTATE_ICON =
        'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA70lEQVQ4T7XTL0vDURTG8c80aJVhEWx2u2AyTYNonmAwGi2Cgth8AWNBgzYZLKmwMJhYLL4Io9hFDP7hyJ2My+/nlLHTzj3P/d5znntvxYhRGXG/sQGWsI1nfGIGD7hI+U/jRR0c4QmneE/KSRxgFruDY+eAFSwjIEVxgkc0+8UccIcaXkoAE7hJmm/JIKCKM2wMuZku1vCWA6bQwvoQQAer+MgBkfdS8TWDzGMTDVyVjRB7trCIvQwQa3VMo43bMhPDk2MsYD85HtoAXOMch79dY78WRsaJc9hJD+oS8R4iAn5f5MG/v8bY/sKfO/kCL2skEWR80iIAAAAASUVORK5CYII=';
    const DEL_ICON =
        'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABIUlEQVRYR+3VPUvEQBSF4WdLsRdBQQsrURErC/31CtoJfiDICooigr22cnEDYdGdO5tgmqQJITNz3jn3zpmJgZ/JwPpGgNGB0YGsAzt4w2fy2K5iHY+l8RmAXdzhFad4Kiy6jTNsYh+3i8ZnAFZwjXChBNEWn+IAX10BYn7YeYmtBRBt8Wcc472PEjRrhKXnf0DMi5/MQEv61VH8G0SINDWPnafFY2KmB+Z30YYIwXiiNNXiywLEvIC4mL3jeynxrgBNP/w7wKAlyDRh6vg1jVXThNljGAEUiVnMgJoeqA2iNETGgdoojtMRwA847COK93CTuAeassadEcEUEHGR3fdxFxzhBR/FbP0ZsIYNXJXGZ0pQWqPT/xFgdGB0YHAHvgG1jEwhcd+TtgAAAABJRU5ErkJggg==';
    const SCALE_ICON =
        'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABJElEQVRYR+3UPS8EURTG8d82GolE0NArlT6ARqEiChrRKXTUWqUtJSpCQoNKlEqlL6CloJB4aVRyky2QnZk7szOzzb3NFPPkPP/z3HNux5BPZ8j+EkBKICVQJYExnCF8s84D9vFatOZVAXYKCq9iGvN4zNNWAShqaglXeMItttsEWMY5NrGASawMCjCOb3wVtB7ML7CGaxzVBXCKF+zmAPw3D9LaAEI3AWArA6CfeWsAWeatAOSZNw4QBu0Y672B63c7jc1AMD/prddNzmB2MYGNQdfw9xDGmgfPUYzgrS6Au8jOi17KP/9jnuJDLGImIvZS5kEcAzCLezzjssDhAO9lKGIAQr0p7GEup/hnbys+mgAoU7OUNjaBUkXLiBNASiAl8AO7pD8h3UM4owAAAABJRU5ErkJggg==';

    /**
     * 页面加载
     */
    window.onload = function () {

        const stage = new Stage({
            canvas: document.querySelector('canvas')
        });

        document.querySelector('.red-box').addEventListener('click', function () {
            const randomX = Math.floor(Math.random() * 200);// 随机X坐标
            const randomY = Math.floor(Math.random() * 200);// 随机Y坐标
            const sprite = new Sprite({// 新建canvas内元素
                pos: [randomX, randomY],
                size: [120, 60],
                minSize: [40, 20],
                maxSize: [240, 120]
            });
            stage.append(sprite);
        });

    }
</script>

</html>
